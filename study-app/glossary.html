<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>术语与源码映射 | nanoGPT 学习实验室</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <div class="shape shape-a"></div>
  <div class="shape shape-b"></div>

  <header class="hero">
    <p class="eyebrow">nanoGPT 学习实验室</p>
    <h1>术语全解与源码映射</h1>
    <p class="hero-subtitle">先把名字讲清楚，再把概念映射回 <code>model.py</code> 和 <code>train.py</code>。</p>
    <nav class="quick-nav">
      <a href="./index.html">首页</a>
      <a href="./glossary.html" class="active">术语与源码</a>
      <a href="./architecture.html">架构图谱</a>
      <a href="./exp1.html">实验 1 编码</a>
      <a href="./exp2.html">实验 2 注意力</a>
      <a href="./exp3.html">实验 3 Block</a>
      <a href="./exp4.html">实验 4 训练与采样</a>
    </nav>
  </header>

  <main class="container">
    <section id="glossary" class="panel">
      <h2>术语全解: 每个名字都说人话</h2>
      <p class="knowledge">知识点: 名词拆解、变量含义、举例理解</p>
      <div class="card glossary-toolbar">
        <label for="termSearch">搜索术语</label>
        <input id="termSearch" placeholder="例如: token, softmax, dropout, warmup">
        <div class="control-row">
          <button id="expandTermsBtn">全部展开</button>
          <button id="collapseTermsBtn" class="secondary">全部收起</button>
          <span class="value-chip" id="termCount">0</span>
        </div>
      </div>
      <div id="termList" class="term-list"></div>
    </section>

    <section id="code-map" class="panel">
      <h2>源码映射 (你可以对照回看)</h2>
      <div class="card">
        <table>
          <thead>
            <tr>
              <th>互动模块</th>
              <th>源码位置</th>
              <th>核心思想</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>文本编码与训练配对</td>
              <td><code>train.py:116</code></td>
              <td><code>x = data[i:i+block_size]</code> 与 <code>y = data[i+1:i+1+block_size]</code></td>
            </tr>
            <tr>
              <td>因果 mask 与 softmax</td>
              <td><code>model.py:68</code>, <code>model.py:69</code></td>
              <td>未来位置设为 <code>-inf</code>，再做 softmax 得概率</td>
            </tr>
            <tr>
              <td>Block 残差结构</td>
              <td><code>model.py:104</code>, <code>model.py:105</code></td>
              <td><code>x = x + ...</code> 两次残差叠加</td>
            </tr>
            <tr>
              <td>学习率与训练循环</td>
              <td><code>train.py:231</code>, <code>train.py:255</code></td>
              <td>按迭代步动态调学习率并持续优化</td>
            </tr>
            <tr>
              <td>采样中的 temperature/top_k</td>
              <td><code>model.py:306</code>, <code>model.py:320</code>, <code>model.py:326</code></td>
              <td>调温度、截断候选，再按概率随机采样</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>把术语卡片当作速查字典，后面所有实验都可以回跳到这一页查概念。</p>
  </footer>

  <div id="termTooltip" class="term-tooltip" hidden></div>
  <script src="./app.js"></script>
</body>
</html>
